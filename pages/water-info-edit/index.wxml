<!--pages/query-water/pay/collect-info/index.wxml-->
<view class="container search-pay">
  <scroll-view scroll-y class="search-pay-content">
    <!-- 水表号 -->
    <van-field custom-style="flex-direction: column;" title-width="100%" label="{{label.wm_no}}" model:value="{{ wm_no }}"  placeholder="{{label.wm_no}}" />

    <!-- 用户名 -->
    <van-field  type ='input' title-width="100%" custom-style="flex-direction: column;" label="{{label.wm_name}}" model:value="{{ wm_name }}"  placeholder="{{label.wm_name}}" required bind:change="handleChangeName" />

    <!-- 时间选择 -->
    <van-field type = 'date' title-width="100%" custom-style="flex-direction: column;" readonly label="{{label.last_time }}" value="{{ last_time }} "placeholder="{{label.last_time}}" bind:click-input="onOpenTimeSelect"
      ></van-field>
    <!-- 最后读数 -->
    <van-field custom-style="flex-direction: column;" title-width="100%" bind:blur="handleReading" data-type="reading" bind:change="handleInputReading" required label="{{label.last_water}}" error="{{reading_error}}" model:value="{{ last_water }}" placeholder="{{label.last_water}}" />

    <!-- 水表类型 -->
    <van-field title-width="100%" required readonly="true" custom-style="flex-direction: column;"  label="{{label.user_type}}" 
      value="{{ user_type }}"  placeholder="{{ label.user_type }}"  bind:click-input="onPriceType" />

  </scroll-view>
  <view class="btn">
    <view class="btn-item" bindtap="submitBtn">
      {{btnName.submitName}}
    </view>
  </view>


    <!-- 价格类型 -->
    <van-popup show="{{ showPriceType }}" safe-area-tab-bar position="bottom" bind:close="onClosePriceType" round>
    <van-picker
     id="priceType"
      show-toolbar 
      columns="{{ optionsPriceType }}"
     confirm-button-text="{{langDialog.confirmText}}" 
     cancel-button-text="{{langDialog.cancelText}}" 
     bind:cancel="onClosePriceType" 
     bind:confirm="handlePriceType" />
  </van-popup>

  <!-- 时间 -->
  <van-popup show="{{ showSelectTime }}" position="bottom" custom-style="height: 300px;" bind:close="onCloseTimeSelect">
    <van-datetime-picker
      id="wixi-date"
      type="date"
      value="{{ currentDate }}"
      formatter="{{ formatter }}"
      confirm-button-text="{{langDialog.confirmText}}"
      cancel-button-text="{{langDialog.cancelText}}"
      bind:confirm="handleGetTime"
      bind:cancel="onCloseTimeSelect"
    />
  </van-popup>
</view>